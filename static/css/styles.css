/* =========================
   ESMO 2025 â€“ Light Theme UI (Approach A, fixed table layout + AI Action Bar)
   ========================= */

/* ------- Design tokens ------- */
:root{
  --brand:#4f6af6;
  --brand-600:#3e57e9;
  --brand-700:#2f46d6;

  --ink:#101828;
  --ink-2:#344054;
  --muted:#667085;

  --bg:#f6f8fb;
  --card:#ffffff;
  --stroke:#e7ecf2;

  --ok:#22c55e;

  --radius-2xl:18px;
  --radius-xl:16px;
  --radius-lg:14px;
  --radius:12px;

  --shadow-md:0 12px 30px rgba(16,24,40,.08);
  --shadow-sm:0 6px 18px rgba(16,24,40,.06);

  --focus:0 0 0 4px rgba(79,106,246,.18);
}

/* ------- Base ------- */
html,body{height:100%;}
body{
  font-family:'Segoe UI',system-ui,-apple-system,Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;
  margin:0; background:var(--bg); color:var(--ink);
}
.container-fluid{padding-left:24px; padding-right:24px;}

/* ---------- App Bar ---------- */
.appbar{
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:var(--radius-2xl);
  box-shadow:var(--shadow-sm);
  padding:12px 16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
}
.appbar-title{ margin:0; font-weight:800; letter-spacing:.2px; font-size:1.25rem; color:var(--ink); }
.appbar-tabs{ display:flex; gap:16px; align-items:center; flex-wrap:wrap; }
.appbar-tabs .appbar-tab{
  background:transparent; border:none; padding:8px 10px; font-weight:700; color:var(--muted);
  border-bottom:3px solid transparent; border-radius:8px 8px 0 0; cursor:pointer;
}
.appbar-tabs .appbar-tab.active{ color:var(--ink); border-bottom-color:var(--brand); }
.appbar-tabs .appbar-tab:hover{ color:var(--ink); }
.nav-tabs{display:none;} /* hide default tabs */

/* ---------- Surfaces ---------- */
.surface, .card{
  background:var(--card)!important; border:1px solid var(--stroke)!important;
  border-radius:var(--radius-2xl)!important; box-shadow:var(--shadow-sm);
}
.card-header{background:transparent; border-bottom:1px solid var(--stroke);}

/* ---------- Filter Bar (both tabs) ---------- */
.filterbar{
  display:flex; align-items:center; gap:12px;
  padding:10px 12px;
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:var(--radius-2xl);
  box-shadow:var(--shadow-sm);
}
.filter-toggle{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px; border-radius:999px; border:1px solid var(--stroke);
  background:linear-gradient(0deg,#fff,#fff); box-shadow:0 1px 2px rgba(16,24,40,.06);
  color:var(--ink-2); font-weight:700;
}
.filter-toggle .icon{font-size:16px; line-height:0; transform:translateY(-1px);}
.filter-toggle:hover{
  border-color:color-mix(in oklab, var(--brand) 35%, var(--stroke));
  box-shadow:0 2px 8px rgba(16,24,40,.08);
}
.filterbar .summary{ color:var(--muted); font-weight:600;}
.filterbar .spacer{ flex:1; }

#searchInput{
  height:44px; border-radius:12px 0 0 12px; border:1px solid var(--ink-2);
}
#searchBtn{
  --bs-btn-color:#fff; --bs-btn-bg:var(--brand); --bs-btn-border-color:var(--brand);
  --bs-btn-hover-bg:var(--brand-600); --bs-btn-hover-border-color:var(--brand-600);
  height:44px; border-radius:0 12px 12px 0;
}

.filters-collapse{
  background:var(--card); border:1px solid var(--stroke);
  border-radius:var(--radius-2xl); box-shadow:var(--shadow-sm); padding:12px;
}
.form-check{margin-bottom:8px;}
.form-check-input{width:18px; height:18px; border:2px solid var(--muted); cursor:pointer;}
.form-check-input:checked{background:var(--brand); border-color:var(--brand); box-shadow:var(--focus);}
.form-check-label{margin-left:6px; font-weight:600; color:var(--ink-2); cursor:pointer;}
.form-label.fw-bold{color:var(--ink-2);}

/* ---------- Table aesthetics ---------- */
.table{ --bs-table-bg:transparent; --bs-table-striped-bg: color-mix(in oklab, var(--stroke) 28%, transparent); }
.table thead th{color:var(--ink-2); font-weight:800; border-bottom-color:var(--stroke);}
.spinner-border{color:var(--brand);}
.table-fixed{ font-size:0.95rem; }
.table-fixed thead th, .table-fixed tbody td{ padding:.5rem .6rem; }
.table-fixed{ table-layout:fixed!important; width:100%; }

/* Table viewport */
#tableViewport{
  height:58vh; overflow:auto; border-radius:var(--radius-2xl);
  border:1px solid var(--stroke); background:var(--card);
}

/* Sticky header + base row height */
.table-fixed thead th{ position:sticky; top:0; z-index:2; background:var(--card); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.table-fixed tbody tr{ height:30px; }

/* Fallback column widths (sync with JS colWidths) */
.table-fixed col:nth-child(1){  width:25%; } /* Title */
.table-fixed col:nth-child(2){  width:15%; } /* Speakers */
.table-fixed col:nth-child(3){  width:12%; } /* Speaker Location */
.table-fixed col:nth-child(4){  width:15%; } /* Affiliation */
.table-fixed col:nth-child(5){  width:8%;  } /* Identifier */
.table-fixed col:nth-child(6){  width:10%; } /* Room */
.table-fixed col:nth-child(7){  width:8%;  } /* Date */
.table-fixed col:nth-child(8){  width:7%;  } /* Time */
.table-fixed col:nth-child(9){  width:12%; } /* Session */
.table-fixed col:nth-child(10){ width:15%; } /* Theme */

/* Single-line by default; expand on hover/tap */
.table-fixed td{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; transition:all 0.3s ease 1s; }
@media (hover:hover) and (pointer:fine){
  .table-fixed tbody tr:hover td{ white-space:normal; overflow:visible; text-overflow:clip; transition:all 0.3s ease 1s; }
}
.table-fixed tbody tr.expanded td{ white-space:normal!important; overflow:visible!important; text-overflow:clip!important; }
.table-fixed tbody tr:hover{ outline:2px solid color-mix(in oklab, var(--brand) 35%, transparent); outline-offset:-2px; }

/* ---------- AI Action Bar (new) ---------- */
.actionbar{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; margin-bottom:12px;
  background:var(--card); border:1px solid var(--stroke);
  border-radius:var(--radius-2xl); box-shadow:var(--shadow-sm);
  overflow:auto;
}
.actionbar .label{ font-weight:800; color:var(--ink); margin-right:2px; white-space:nowrap; }
.action-chip{
  display:inline-flex; align-items:center; gap:10px;
  padding:12px 14px; border-radius:999px; background:#fff;
  border:1px solid var(--stroke); box-shadow:0 1px 2px rgba(16,24,40,.06);
  cursor:pointer; transition:all .15s ease; white-space:nowrap;
}
.action-chip:hover{ border-color:var(--brand); box-shadow:var(--shadow-sm); transform:translateY(-1px);}
.action-chip .icon{ font-size:18px; line-height:0; }
.action-chip .title{ font-weight:800; color:var(--ink); }
.action-chip .sub{ color:var(--muted); font-weight:600; }

/* ---------- Chat UI ---------- */
#chatContainer{
  background:var(--card); border:1px solid var(--stroke);
  border-radius:var(--radius-2xl); box-shadow:var(--shadow-sm);
}
.message{margin-bottom:12px; padding:10px 14px; border-radius:14px; max-width:72%; line-height:1.45; box-shadow:0 1px 0 rgba(0,0,0,.04);}
.message.user{background:var(--brand); color:#fff; margin-left:auto;}
.message.assistant{background:#f2f4f7; color:var(--ink); margin-right:auto;}
.message.assistant a{color:var(--brand-700); text-decoration:underline;}
#sendChatBtn{height:46px; border-radius:12px; background:var(--ok); border-color:var(--ok); font-weight:800;}
#sendChatBtn:hover{background:#16a34a; border-color:#16a34a;}
#userInput{border:1px solid var(--stroke); border-radius:12px; height:46px;}

/* Utilities */
.section{margin-top:16px; margin-bottom:16px;}
:focus-visible{outline:none; box-shadow:var(--focus);}
.text-purple{color:#8b5cf6!important;}
@media (max-width: 992px){
  #tableViewport{ height:50vh; }
  .appbar{flex-direction:column; align-items:flex-start; gap:6px;}
  .appbar-tabs{gap:8px;}
}

