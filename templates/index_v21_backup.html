<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>ESMO 2025 ‚Äî Conference Intelligence Platform</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- App styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  </head>
  <body>
    <!-- Main Container (No Sidebar) -->
    <div class="container-fluid">
      <!-- Header -->
      <div class="row">
        <div class="col-12">
          <div class="d-flex justify-content-between align-items-center py-3 border-bottom">
            <div>
              <h3 class="mb-0">üß¨ ESMO 2025 Conference Intelligence</h3>
              <small class="text-muted">EMD Serono Medical Affairs Strategic Platform</small>
            </div>
            <div class="badge bg-success">Live Data</div>
          </div>
        </div>
      </div>

      <!-- Navigation Tabs -->
      <div class="row mt-3">
        <div class="col-12">
          <ul class="nav nav-tabs" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="data-explorer-tab" data-bs-toggle="tab" data-bs-target="#data-explorer" type="button" role="tab">
                üìä Data Explorer
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="ai-assistant-tab" data-bs-toggle="tab" data-bs-target="#ai-assistant" type="button" role="tab">
                ü§ñ AI Assistant
              </button>
            </li>
          </ul>
        </div>
      </div>

      <!-- Tab Content -->
      <div class="tab-content" id="mainTabContent">

        <!-- DATA EXPLORER TAB -->
        <div class="tab-pane fade show active" id="data-explorer" role="tabpanel">
          <div class="row py-3">
            <div class="col-12">

              <!-- Inline Filters -->
              <div class="bg-light rounded p-3 mb-3">
                <div class="row align-items-center">
                  <div class="col-md-3">
                    <label class="form-label mb-1 fw-bold">üéØ Drug Focus</label>
                    <div class="drug-filters d-flex flex-wrap gap-2">
                      <div class="form-check">
                        <input class="form-check-input drug-filter-checkbox" type="checkbox" value="Avelumab Focus" id="drug_avelumab">
                        <label class="form-check-label" for="drug_avelumab">Avelumab</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input drug-filter-checkbox" type="checkbox" value="Tepotinib Focus" id="drug_tepotinib">
                        <label class="form-check-label" for="drug_tepotinib">Tepotinib</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input drug-filter-checkbox" type="checkbox" value="Cetuximab Focus" id="drug_cetuximab">
                        <label class="form-check-label" for="drug_cetuximab">Cetuximab</label>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label mb-1 fw-bold">üè• Therapeutic Area</label>
                    <div class="ta-filters d-flex flex-wrap gap-2">
                      <div class="form-check">
                        <input class="form-check-input ta-filter-checkbox" type="checkbox" value="Bladder Cancer" id="ta_bladder">
                        <label class="form-check-label" for="ta_bladder">Bladder</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ta-filter-checkbox" type="checkbox" value="Lung Cancer" id="ta_lung">
                        <label class="form-check-label" for="ta_lung">Lung</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ta-filter-checkbox" type="checkbox" value="Colorectal Cancer" id="ta_colorectal">
                        <label class="form-check-label" for="ta_colorectal">Colorectal</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ta-filter-checkbox" type="checkbox" value="Head and Neck Cancer" id="ta_head_neck">
                        <label class="form-check-label" for="ta_head_neck">Head & Neck</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ta-filter-checkbox" type="checkbox" value="Gynecologic Cancer" id="ta_gynecologic">
                        <label class="form-check-label" for="ta_gynecologic">Gynecologic</label>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label mb-1 fw-bold">üîç Search</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="searchInput" placeholder="Search titles, authors, institutions...">
                      <button class="btn btn-outline-primary" id="searchBtn">üîç</button>
                    </div>
                  </div>
                </div>

              </div>

              <!-- Data Table -->
              <div class="card">
                <div class="card-header">
                  <h5 class="mb-0" id="tableTitle">Conference Data - <small id="filterContext" class="text-muted">Loading filter context...</small></h5>
                </div>
                <div class="card-body">
                  <div id="tableContainer">
                    <div class="text-center py-4">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <p class="mt-2">Loading ESMO 2025 data...</p>
                    </div>
                  </div>
                  <!-- Export Button under table -->
                  <div class="text-center mt-3">
                    <button class="btn btn-outline-secondary" id="exportBtn">üìÅ Download Table</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI ASSISTANT TAB -->
        <div class="tab-pane fade" id="ai-assistant" role="tabpanel">
          <div class="row py-3">
            <div class="col-12">

              <!-- Inline Filters for AI -->
              <div class="bg-light rounded p-3 mb-3">
                <div class="row align-items-center">
                  <div class="col-md-3">
                    <label class="form-label mb-1 fw-bold">üéØ Drug Focus</label>
                    <div class="ai-drug-filters d-flex flex-wrap gap-2">
                      <div class="form-check">
                        <input class="form-check-input ai-drug-filter-checkbox" type="checkbox" value="Avelumab Focus" id="ai_drug_avelumab">
                        <label class="form-check-label" for="ai_drug_avelumab">Avelumab</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ai-drug-filter-checkbox" type="checkbox" value="Tepotinib Focus" id="ai_drug_tepotinib">
                        <label class="form-check-label" for="ai_drug_tepotinib">Tepotinib</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ai-drug-filter-checkbox" type="checkbox" value="Cetuximab Focus" id="ai_drug_cetuximab">
                        <label class="form-check-label" for="ai_drug_cetuximab">Cetuximab</label>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label mb-1 fw-bold">üè• Therapeutic Area</label>
                    <div class="ai-ta-filters d-flex flex-wrap gap-2">
                      <div class="form-check">
                        <input class="form-check-input ai-ta-filter-checkbox" type="checkbox" value="Bladder Cancer" id="ai_ta_bladder">
                        <label class="form-check-label" for="ai_ta_bladder">Bladder</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ai-ta-filter-checkbox" type="checkbox" value="Lung Cancer" id="ai_ta_lung">
                        <label class="form-check-label" for="ai_ta_lung">Lung</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ai-ta-filter-checkbox" type="checkbox" value="Colorectal Cancer" id="ai_ta_colorectal">
                        <label class="form-check-label" for="ai_ta_colorectal">Colorectal</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ai-ta-filter-checkbox" type="checkbox" value="Head and Neck Cancer" id="ai_ta_head_neck">
                        <label class="form-check-label" for="ai_ta_head_neck">Head & Neck</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input ai-ta-filter-checkbox" type="checkbox" value="Gynecologic Cancer" id="ai_ta_gynecologic">
                        <label class="form-check-label" for="ai_ta_gynecologic">Gynecologic</label>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div id="aiFilterContext" class="small text-muted mt-3">
                      Select filters to focus AI analysis
                    </div>
                  </div>
                </div>
              </div>

              <!-- Intelligence Buttons -->
              <div class="row mb-4">
                <div class="col-12">
                  <h5>‚ö° Quick Intelligence Playbooks</h5>
                  <div class="row g-2">
                    <div class="col">
                      <button class="btn btn-outline-primary w-100 playbook-button" data-playbook="competitor">
                        üèÜ Competitor Intelligence
                      </button>
                    </div>
                    <div class="col">
                      <button class="btn btn-outline-primary w-100 playbook-button" data-playbook="kol">
                        üë• KOL Analysis
                      </button>
                    </div>
                    <div class="col">
                      <button class="btn btn-outline-primary w-100 playbook-button" data-playbook="institution">
                        üè• Institution Analysis
                      </button>
                    </div>
                    <div class="col">
                      <button class="btn btn-outline-primary w-100 playbook-button" data-playbook="insights">
                        üß≠ Insights & Trends
                      </button>
                    </div>
                    <div class="col">
                      <button class="btn btn-outline-primary w-100 playbook-button" data-playbook="strategy">
                        üìã Strategic Recommendations
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Chat Interface -->
              <div class="row">
                <div class="col-12">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">üí¨ AI Assistant</h5>
                    </div>
                    <div class="card-body">
                      <div id="chatContainer" style="height: 400px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 0.375rem; padding: 1rem; margin-bottom: 1rem;">
                        <div class="text-muted text-center">
                          <p>Welcome to ESMO 2025 Conference Intelligence! üß¨</p>
                          <p>Use the Quick Intelligence buttons above for strategic analysis, or ask specific questions below.</p>
                        </div>
                      </div>
                      <div class="input-group">
                        <input type="text" class="form-control" id="userInput" placeholder="Ask about ESMO sessions, competitive landscape, KOLs...">
                        <button class="btn btn-primary" id="sendChatBtn" type="button">Send</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- App JavaScript -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>